<!--
  Generated template for the ForumShow page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>{{forumName}}</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>

  <div [ngStyle]="{'display': nicEditorDisplay}">
    <button  id="openNewTopic" ion-button full (click)="jq('#newTopic').slideDown(); jq('#openNewTopic').slideUp();" >发表新主题</button>
  </div>
  <div style="margin: 5px; display: none;" id="newTopic">
		<label class="labelField" >主题：<span>（必填）</span></label>
		<input type="text" [(ngModel)]="subjectField" value="" class="subjectField" id="subjectField">
		<label class="labelField" >内容: <span>（必填）</span></label>
		<div class="niceDiv">
			<textarea class="subjectTextarea" style="width: 100%; height: 200px;" id="niceTopicTextArea"></textarea>  				
  	</div>

    <ion-grid>
      <ion-row style="margin-top: 5px;">
        <ion-col width-50>
          <input type="submit" class="topicSubmitButton" (click)="sendNewTopic()" style="background-color:#99CC33;" value="发送">
          </ion-col>
        <ion-col width-50>
          <input type="submit" class="topicSubmitButton"
            (click)="jq('#newTopic').slideUp(); jq('#openNewTopic').slideDown();" style="background-color:#FF9933;" value="取消">
        </ion-col>
      </ion-row>
    </ion-grid>
	</div>

  <div padding *ngIf="forumPage != null && forumPage.totalPages > 1">
    <ion-segment>
      <ion-segment-button *ngIf="forumPage.thisPage > 1" value="prePage" (ionSelect)="previousPage(forumPage.thisPage, forumPage.recordsPerPage)">
        上一页
      </ion-segment-button>
      <ion-segment-button value="thisPage">
        {{forumPage.thisPage}}/{{forumPage.totalPages}}
      </ion-segment-button>
      <ion-segment-button *ngIf=" forumPage.totalPages > forumPage.thisPage" value="nextPage" (ionSelect)="nextPage(forumPage.thisPage, forumPage.recordsPerPage)">
        下一页
      </ion-segment-button>
    </ion-segment>
  </div>

  <div *ngIf="forumPage != null && forumPage.topics != null">
    <ion-list>
      <ion-item *ngFor="let topic of forumPage.topics">
        <!-- <div class="topicTitle" (click)="openTopic(topic)">{{ topic.title }}</div>  -->
        <div class="topicTitle" (click)="openTopic(topic)" [innerHTML]=" topic.oneTitle | safeHtml"></div>
      </ion-item>
    </ion-list>
  </div>

  <div padding *ngIf="forumPage != null && forumPage.totalPages > 1">
    <ion-segment>
      <ion-segment-button *ngIf="forumPage.thisPage > 1" value="prePage" (ionSelect)="previousPage(forumPage.thisPage, forumPage.recordsPerPage)">
        上一页
      </ion-segment-button>
      <ion-segment-button value="thisPage">
        {{forumPage.thisPage}}/{{forumPage.totalPages}}
      </ion-segment-button>
      <ion-segment-button *ngIf=" forumPage.totalPages > forumPage.thisPage" value="nextPage" (ionSelect)="nextPage(forumPage.thisPage, forumPage.recordsPerPage)">
        下一页
      </ion-segment-button>
    </ion-segment>
  </div>

</ion-content>